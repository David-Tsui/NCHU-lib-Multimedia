extends ../layouts/default

include ../mixins/movie
block content
	.ui.grid.main-container#movie-blog
		.ui.fourteen.wide.column
			header
				h2=category ? category.name : '影片總覽'
			if filters.category && !category
				h3 分類不存在!
			else
				if movies.results.length
					if movies.totalPages > 1
						h5
							| 顯示
							strong #{movies.total}
							| 項結果中的
							strong #{movies.first}
							| 至
							strong #{movies.last}
							| 項
					else
						//- .lead.text-muted Showing #{utils.plural(movies.results.length, '* movie')}
						h4 共有 #{movies.results.length} 部電影
					.ui.grid
						each movie in movies.results
							.four.wide.column
								+movie(movie)
					if movies.totalPages > 1
						ul.pagination
							if movies.previous
								li: a(href='?page=' + movies.previous): i.material-icons chevron_left
							else
								li.disabled: i.material-icons chevron_left
							each p, i in movies.pages
								li(class=movies.currentPage === p ? 'active' : null)
									a(href='?page=' + (p === '...' ? (i ? movies.totalPages : 1) : p ))= p
							if movies.next
								li: a(href='?page=' + movies.next): i.material-icons chevron_right
							else
								li.disabled: i.material-icons chevron_right
				else
					if category
						//- h3 No movies in the category #{category.name}.
						h5 此分類目前沒有影片
						a(href="/movies/movie_blog/") 
							button.mdl-button.mdl-js-button.mdl-button--raised.mdl-js-ripple-effect.mdl-color--primary= '回全部影片'
					else
						h5 There are no movies yet.
		.ui.two.wide.column
			if categories.length
				table.mdl-data-table.mdl-js-data-table
					tr
						td.category-header
							a(href='/movies/movie_blog/') 瀏覽全部
					each category in categories
						tr
							if category.root_cat
								td.category-header(colspan="2")!= category.root_cat.name
						each sub_cat in categories
							tr
								td
									a.td-a(href='/movies/' + section + '/' + sub_cat._id)
										span!= sub_cat.name
										span.ui.circular.label!= sub_cat.movieCount
